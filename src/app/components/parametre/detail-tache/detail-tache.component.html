<main>
  <section class="section">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="card mb-3">
            <div class="card-body">

              <div class="d-flex justify-content-between align-items-center flex-wrap">
                <h5 class="card-title m-0">Informations de l'entretien:</h5>
              </div>
              <hr>

              <!-- Section Informations Client et Véhicule -->
              <div class="flex flex-col lg:flex-row lg:space-x-6">
                <!-- Section Client -->
                <div class="bg-white shadow-md rounded-lg p-6 flex-1 mb-6 lg:mb-0">
                  <h3 class="text-lg font-semibold mb-4">{{detail?.typeEntretien?.nom}}</h3>
                  <div class="mt-4">
                    <p><strong>{{detail?.typeEntretien?.description}}</strong></p>
                  </div>
                  <hr>
                  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <!-- Colonne de gauche -->
                    <div>
                      <p><strong>Nom du client:</strong> {{detail?.entretien?.vehicule?.proprietaire?.nom}}</p>
                      <p><strong>Marque:</strong> {{detail?.entretien?.vehicule?.modele?.marque?.nom}}</p>
                      <p><strong>Catégorie:</strong> {{detail?.entretien?.vehicule?.modele?.categorie?.nom}}</p>
                      <p><strong>Immatriculation:</strong> {{detail?.entretien?.vehicule?.immatriculation}}</p>
                    </div>

                    <!-- Colonne de droite -->
                    <div>
                      <p><strong>Carburant:</strong> {{detail?.entretien?.vehicule?.modele?.energieMoteur?.nom}}</p>
                      <p><strong>Transmission:</strong> {{detail?.entretien?.vehicule?.modele?.transmission?.nom}}</p>
                      <p><strong>Motricité:</strong> {{detail?.entretien?.vehicule?.modele?.motricite?.nom}}</p>
                      <p><strong>Année de fabrication:</strong> {{detail?.entretien?.vehicule?.modele?.anneeFabrication}}</p>
                    </div>
                  </div>
                  <hr>
                  <form [formGroup]="dateForm" (ngSubmit)="updateDateRapport()">
                    <div class="flex flex-col lg:flex-row lg:space-x-4">
                      <div class="flex-1">
                        <label for="start-time" class="block text-sm font-medium text-gray-700">Date et heure de début</label>
                        <input type="datetime-local" id="start-time" formControlName="dateDebut" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                        <div *ngIf="dateForm.get('dateDebut')?.errors?.['dateDebutRequired']" class="text-red-500 text-sm">
                          La date de début est obligatoire si une date de fin est saisie.
                        </div>
                      </div>
                     
                      <div class="flex-1">
                        <label for="end-time" class="block text-sm font-medium text-gray-700">Date et heure de fin</label>
                        <input type="datetime-local" id="end-time" formControlName="dateFin" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                        <div *ngIf="dateForm.get('dateFin')?.errors?.['dateRangeInvalid']" class="text-red-500 text-sm">
                          La date de fin doit être postérieure à la date de début.
                        </div>
                      </div>
                     
                      
                      <button class="px-4 py-2 btn btn-dark text-white rounded-md shadow-md hover:bg-blue-700 self-end" [disabled]="dateForm.invalid">
                        Ajouter
                      </button>
                                        
                    </div>
                                      
                  </form>
                  

                  <div class="bg-white shadow-md rounded-lg p-6 mt-6">
                    <h3 class="text-lg font-semibold mb-4">Liste des rapports</h3>
                    <div class="overflow-x-auto">
                      <table class="min-w-full table-auto border-collapse">
                        <thead>
                        <tr class="bg-gray-100">
                          <th class="px-4 py-2 text-left">Libellé du rapport</th>
                          <th class="px-4 py-2 text-left">Prix</th>
                          <th class="px-4 py-2 text-left">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                          <td class="px-4 py-2">Vidange moteur</td>
                          <td class="px-4 py-2">50€</td>
                          <td class="px-4 py-2">
                            <button class="btn btn-primary">Voir justificatifs</button>
                          </td>
                        </tr>
                        <tr>
                          <td class="px-4 py-2">Changement filtre à huile</td>
                          <td class="px-4 py-2">20€</td>
                          <td class="px-4 py-2">
                            <button class="btn btn-primary">Voir justificatifs</button>
                          </td>
                        </tr>
                        <!-- Ajoutez plus de rapports ici si nécessaire -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- Section Ajout de rapport -->
                <div class="bg-white shadow-md rounded-lg p-6 mt-6 lg:mt-0">
                  <h3 class="text-lg font-semibold mb-4">Ajout de rapport</h3>
                  <div class="mb-4">
                    <label for="report-label" class="block text-sm font-medium text-gray-700">Libellé du rapport</label>
                    <input type="text" id="report-label" name="report-label" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Entrez le libellé du rapport">
                  </div>
                  <div class="mb-4">
                    <label for="price" class="block text-sm font-medium text-gray-700">Prix (optionnel)</label>
                    <input type="number" id="price" name="price" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Entrez le prix">
                  </div>

                  <!-- Section téléchargement justificatif -->
                  <div class="mb-4">
                    <label for="documents" class="block text-sm font-medium text-gray-700">Ajouter des fichiers justificatifs</label>
                    <input type="file" id="documents" name="documents" class="mt-1 block w-full text-sm text-gray-700 border border-gray-300 rounded-md shadow-sm" multiple>
                  </div>
                  <hr>

                  <div class="flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0">
                    <button class="btn btn-dark me-2 mb-2"> Ajouter rapport</button>
                    <button class="btn btn-dark mb-2"> Consommable utilisé</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
<app-loader *ngIf="loader"></app-loader>